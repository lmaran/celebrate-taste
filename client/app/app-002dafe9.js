"use strict";var app=angular.module("celebrate-taste",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]);app.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,n){e.otherwise({redirectTo:"/admin"}),t.html5Mode(!0),n.interceptors.push("authInterceptor")}]),app.run(["$rootScope","$location","Auth",function(e,t,n){e.$on("$routeChangeStart",function(e,o,r){n.isLoggedInAsync(function(n){o.authenticate&&!n&&(e.preventDefault(),t.path("/login"))})}),e.$on("$routeChangeSuccess",function(t,n,o){n.hasOwnProperty("$$route")&&(e.pageTitle=n.$$route.title)})}]),app.config(["$routeProvider",function(e){e.when("/admin/login",{controller:"loginController",templateUrl:"app/account/login/login.html",title:"Autentificare"}).when("/admin/signup",{controller:"signupController",templateUrl:"app/account/signup/signup.html",title:"Inregistrare"}).when("/admin/changePassword",{controller:"changePasswordController",templateUrl:"app/account/changePassword/changePassword.html",title:"Schimba parola",authenticate:!0}).when("/admin/resetpassword",{controller:"resetPasswordController",templateUrl:"app/account/resetPassword/forgotPassword.html",title:"Reseteaza parola"}).when("/admin/resetpassword:ptoken",{controller:"resetPasswordController",templateUrl:"app/account/resetPassword/resetPassword.html",title:"Reseteaza parola"})}]),app.factory("authInterceptor",["$rootScope","$q","$cookies","$location",function(e,t,n,o){return{request:function(e){return e.headers=e.headers||{},n.get("token")&&(e.headers.Authorization="Bearer "+n.get("token")),e},responseError:function(e){return 401===e.status?(o.path("/login"),n.remove("token"),t.reject(e)):t.reject(e)}}}]),app.factory("Auth",["$location","$rootScope","$http","User","$cookies","$q",function(e,t,n,o,r,i){var a={};return r.get("token")&&(a=o.get()),{login:function(e,t){var u=t||angular.noop,c=i.defer();return n.post("/auth/local",{email:e.email,password:e.password}).success(function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth()+6,t.getDate());return r.put("token",e.token,{expires:n}),a=o.get(),c.resolve(e),u()}).error(function(e){return this.logout(),c.reject(e),u(e)}.bind(this)),c.promise},logout:function(){r.remove("token"),a={}},createUser:function(e,t){var n=t||angular.noop;return o.save(e,function(t){var i=new Date,u=new Date(i.getFullYear(),i.getMonth()+6,i.getDate());return r.put("token",t.token,{expires:u}),a=o.get(),n(e)},function(e){return this.logout(),n(e)}.bind(this)).$promise},changePassword:function(e,t,n){var r=n||angular.noop;return o.changePassword({id:a._id},{oldPassword:e,newPassword:t},function(e){return r(e)},function(e){return r(e)}).$promise},getCurrentUser:function(){return a},isLoggedIn:function(){return a.hasOwnProperty("role")},isLoggedInAsync:function(e){a.hasOwnProperty("$promise")?a.$promise.then(function(){e(!0)})["catch"](function(){e(!1)}):e(a.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===a.role},getToken:function(){return r.get("token")}}}]),app.factory("User",["$resource",function(e){return e("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),app.controller("contactController",["$scope",function(e){}]),app.config(["$routeProvider",function(e){e.when("/admin/contact",{controller:"contactController",templateUrl:"app/contact/contact.html"})}]),app.directive("googleMap",["$rootScope","loadGoogleMapAPI",function(e,t){return{restrict:"C",scope:{mapId:"@id",lat:"@","long":"@",title:"@"},link:function(e,n,o){angular.isDefined(e.lat)&&angular.isDefined(e["long"])&&(e.initialize=function(){e.location=new google.maps.LatLng(e.lat,e["long"]),e.mapOptions={zoom:16,scrollwheel:!1,center:e.location},e.map=new google.maps.Map(document.getElementById(e.mapId),e.mapOptions);new google.maps.Marker({position:e.location,map:e.map,title:e.title})},t.then(function(){e.initialize()},function(){}))}}}]),app.service("loadGoogleMapAPI",["$window","$q",function(e,t){function n(){var e=document.createElement("script");e.src="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=initMap",document.body.appendChild(e)}var o=t.defer();return e.initMap=function(){o.resolve()},n(),o.promise}]),app.controller("customerController",["$scope","$window","$route","customerService","$location",function(e,t,n,o,r){function i(){a()}function a(){o.getById(n.current.params.id).then(function(t){e.customer=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.customer={},e.isEditMode&&i(),e.create=function(t){e.submitted=!0,t.$valid&&o.create(e.customer).then(function(e){r.path("/customers")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.update=function(t){e.submitted=!0,t.$valid&&o.update(e.customer).then(function(e){r.path("/customers")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.config(["$routeProvider",function(e){e.when("/admin/customers",{controller:"customersController",templateUrl:"app/customer/customers.html",title:"Clienti"}).when("/admin/customers/create",{controller:"customerController",templateUrl:"app/customer/customer.html",title:"Adauga client"}).when("/admin/customers/:id",{controller:"customerController",templateUrl:"app/customer/customer.html",title:"Editeaza client",isEditMode:!0})}]),app.factory("customerService",["$http",function(e){var t={},n="/api/customers/";return t.create=function(t){return e.post(n,t)},t.getAll=function(){return e.get(n).then(function(e){return e.data})},t.getById=function(t){return e.get(n+encodeURIComponent(t)).then(function(e){return e.data})},t.update=function(t){return e.put(n,t)},t["delete"]=function(t){return e["delete"](n+encodeURIComponent(t))},t}]),app.controller("customersController",["$scope","$location","customerService",function(e,t,n){function o(){n.getAll().then(function(t){e.customers=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.customers=[],e.errors={},o(),e["delete"]=function(t){for(var o in e.customers)if(e.customers[o]._id===t._id)break;n["delete"](t._id).then(function(){e.customers.splice(o,1)})["catch"](function(t){e.errors=JSON.stringify(t.data,null,4),alert(e.errors)})},e.create=function(){t.path("/customers/create")},e.refresh=function(){o()}}]),app.controller("customerEmployeeController",["$scope","$window","$route","customerEmployeeService","$location",function(e,t,n,o,r){function i(){a()}function a(){o.getById(n.current.params.id).then(function(t){e.customerEmployee=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.customerEmployee={},e.isEditMode&&i(),e.create=function(t){e.submitted=!0,t.$valid&&o.create(e.customerEmployee).then(function(e){r.path("/customerEmployees")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.update=function(t){e.submitted=!0,t.$valid&&o.update(e.customerEmployee).then(function(e){r.path("/customerEmployees")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.config(["$routeProvider",function(e){e.when("/admin/customerEmployees",{controller:"customerEmployeesController",templateUrl:"app/customerEmployee/customerEmployees.html",title:"Angajati client"}).when("/admin/customerEmployees/create",{controller:"customerEmployeeController",templateUrl:"app/customerEmployee/customerEmployee.html",title:"Adauga angajat"}).when("/admin/customerEmployees/:id",{controller:"customerEmployeeController",templateUrl:"app/customerEmployee/customerEmployee.html",title:"Editeaza angajat",isEditMode:!0})}]),app.factory("customerEmployeeService",["$http",function(e){var t={},n="/api/customerEmployees/";return t.create=function(t){return e.post(n,t)},t.getAll=function(){return e.get(n).then(function(e){return e.data})},t.getById=function(t){return e.get(n+encodeURIComponent(t)).then(function(e){return e.data})},t.update=function(t){return e.put(n,t)},t["delete"]=function(t){return e["delete"](n+encodeURIComponent(t))},t}]),app.controller("customerEmployeesController",["$scope","$location","customerEmployeeService","modalService",function(e,t,n,o){function r(){n.getAll().then(function(t){e.customerEmployees=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.customerEmployees=[],e.errors={},r(),e["delete"]=function(t){var r={bodyDetails:t.name};o.confirm(r).then(function(o){for(var r in e.customerEmployees)if(e.customerEmployees[r]._id===t._id)break;n["delete"](t._id).then(function(){e.customerEmployees.splice(r,1)})["catch"](function(t){e.errors=JSON.stringify(t.data,null,4),alert(e.errors)})})},e.create=function(){t.path("/customerEmployees/create")},e.refresh=function(){r()}}]),app.controller("dishController",["$scope","$window","$route","dishService","$location",function(e,t,n,o,r){function i(){a()}function a(){o.getById(n.current.params.id).then(function(t){e.dish=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.dish={},e.isEditMode&&i(),e.create=function(n){e.submitted=!0,n.$valid&&o.create(e.dish).then(function(e){t.history.back()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.update=function(n){e.submitted=!0,n.$valid&&o.update(e.dish).then(function(e){t.history.back()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.config(["$routeProvider",function(e){e.when("/admin/dishes",{controller:"dishesController",templateUrl:"app/dish/dishes.html",title:"Feluri de mancare"}).when("/admindishes/create",{controller:"dishController",templateUrl:"app/dish/dish.html",title:"Adauga un fel de mancare"}).when("/admin/dishes/:id",{controller:"dishController",templateUrl:"app/dish/dish.html",title:"Editeaza felul de mancare",isEditMode:!0})}]),app.factory("dishService",["$http",function(e){var t={},n="/api/dishes/";return t.create=function(t){return e.post(n,t)},t.getAll=function(){return e.get(n).then(function(e){return e.data})},t.getById=function(t){return e.get(n+encodeURIComponent(t)).then(function(e){return e.data})},t.update=function(t){return e.put(n,t)},t["delete"]=function(t){return e["delete"](n+encodeURIComponent(t))},t}]),app.controller("dishesController",["$scope","$location","dishService","modalService",function(e,t,n,o){function r(){n.getAll().then(function(t){e.dishes=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.dishes=[],e.errors={},r(),e["delete"]=function(t){var r={bodyDetails:t.name};o.confirm(r).then(function(o){var r=0;for(r in e.dishes)if(e.dishes[r]._id===t._id)break;n["delete"](t._id).then(function(){e.dishes.splice(r,1)})["catch"](function(t){e.errors=JSON.stringify(t.data,null,4),alert(e.errors)})})},e.create=function(){t.path("/dishes/create")},e.refresh=function(){r()},e.showModal=function(e){var t={imageUrl:e.imageUrl};o.showImage(t).then(function(e){})}}]),app.controller("homeController",["$scope","menuService","helperService",function(e,t,n){e.todaysMenu={},e.today=n.getFriendlyDate(new Date);var o=function(){var n=e.today.ymd;t.getMenu(n).then(function(t){e.todaysMenu=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})},r=function(){o()};r()}]),app.config(["$routeProvider",function(e){e.when("/admin",{controller:"homeController",templateUrl:"app/home/home.html"})}]),app.controller("addDishToMenuTplController",["$scope","$uibModalInstance","dataToModal","helperService","dishService",function(e,t,n,o,r){function i(){r.getAll().then(function(t){e.dishes=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.dishes=[],e.ok=function(){t.close("aaa")},e.cancel=function(){t.dismiss("cancel")},i()}]),app.controller("addToMenuController",["$scope","$route","$window","$location","helperService","dishService","menuService",function(e,t,n,o,r,i,a){function u(){a.getById(t.current.params.id).then(function(t){e.menu=t,e.roMenuDate=r.getStringFromString(t.menuDate)})["catch"](function(e){alert(JSON.stringify(e,null,4))})}function c(){i.getAll().then(function(t){e.dishes=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}function l(){c(),u()}e.categories=[{value:0,name:"Toate felurile"},{value:1,name:"Supa"},{value:2,name:"Felul 2"},{value:3,name:"Salata"},{value:4,name:"Desert"}],e.menu={},e.selectedCategory=e.categories[0],e.isFastingSelected=!1,e.selectCategory=function(t){e.selectedCategory=t},e.dishes=[],l(),e.status={isopen:!1},e.addToMenu=function(t){var n={};angular.copy(t,n),n._id=r.makeId(6),("1"===t.category||"2"===t.category)&&(n.option=s(e.menu,t)),void 0===e.menu.dishes&&(e.menu.dishes=[]),e.menu.dishes.push(n),a.update(e.menu).then(function(e){t.isAddedTmp=!0,u()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.removeFromMenu=function(t){_.remove(e.menu.dishes,function(e){return e._id===t._id}),a.update(e.menu).then(function(e){delete t.isAddedTmp})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})};var s=function(e,t){var n=_.chain(e.dishes).filter("category",t.category).sortBy("option").last().value();if(console.log(n),void 0===n||void 0===n.option)return"A";var o=n.option;return String.fromCharCode(o.charCodeAt(0)+1)};e.goBack=function(){n.history.back()},e.refresh=function(){l()}}]),app.controller("createMenuTplController",["$scope","$uibModalInstance","dataToModal","helperService",function(e,t,n,o){e.menuDate=n&&10===n.length?o.getDateFromString(n):new Date,e.menuDate.setDate(e.menuDate.getDate()+1),e.ok=function(){t.close(e.menuDate)},e.cancel=function(){t.dismiss("cancel")},e.dateOptions={startingDay:1},e.isOpen=!1,e.open=function(){e.isOpen=!0}}]),app.controller("menuController",["$scope","$window","$route","menuService","$location",function(e,t,n,o,r){function i(){a()}function a(){o.getById(n.current.params.id).then(function(t){e.menu=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.menu={},e.isEditMode&&i(),e.create=function(t){e.submitted=!0,t.$valid&&o.create(e.menu).then(function(e){r.path("/menus")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.update=function(t){e.submitted=!0,t.$valid&&o.update(e.menu).then(function(e){r.path("/menus")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.controller("menuItemController",["$scope","$window","$route","menuService",function(e,t,n,o){function r(){i()}function i(){o.getById(n.current.params.menuId).then(function(t){e.menu=t,e.dish=_.find(t.dishes,"_id",n.current.params.dishId)})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.menu={},e.dish={},e.isEditMode&&r(),e.update=function(n){e.submitted=!0,n.$valid&&o.update(e.menu).then(function(e){t.history.back()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.config(["$routeProvider",function(e){e.when("/admin/menus",{controller:"menusController",templateUrl:"app/menu/menus.html",title:"Meniuri"}).when("/admin/menus/create",{controller:"menuController",templateUrl:"app/menu/menu.html",title:"Adauga meniu"}).when("/admin/menus/:id",{controller:"menuController",templateUrl:"app/menu/menu.html",title:"Editeaza meniu",isEditMode:!0}).when("/admin/menus/:id/add",{controller:"addToMenuController",templateUrl:"app/menu/addToMenu.html",title:"Adauga la meniu",isEditMode:!0}).when("/admin/menus/:menuId/dishes/:dishId",{controller:"menuItemController",templateUrl:"app/menu/menuItem.html",title:"Editeaza produsul din meniu",isEditMode:!0})}]),app.factory("menuService",["$http",function(e){var t={},n="/api/menus/";return t.create=function(t){return e.post(n,t)},t.getAll=function(){return e.get(n).then(function(e){return e.data})},t.getNextMenus=function(){return e.get(n+"nextMenus/").then(function(e){return e.data})},t.getById=function(t){return e.get(n+encodeURIComponent(t)).then(function(e){return e.data})},t.getMenu=function(t){return e.get(n+"today/"+t).then(function(e){return e.data})},t.update=function(t){return e.put(n,t)},t["delete"]=function(t){return e["delete"](n+encodeURIComponent(t))},t}]),app.controller("menusController",["$scope","$location","menuService","modalService","helperService","$uibModal",function(e,t,n,o,r,i){function a(){n.getAll().then(function(t){e.menus=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.menus=[],e.errors={},e.friendlyDate=function(e){return r.getStringFromString(e)},a(),e.deleteDishFromMenu=function(t,r){var i={bodyDetails:t.name};o.confirm(i).then(function(o){_.remove(r.dishes,function(e){return e._id===t._id}),n.update(r).then(function(t){e.refresh()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})})},e.deleteMenu=function(t){var r={bodyDetails:"Meniul de "+e.friendlyDate(t.menuDate)};o.confirm(r).then(function(o){n["delete"](t._id).then(function(){e.refresh()})["catch"](function(t){e.errors=JSON.stringify(t.data,null,4),alert(e.errors)})})},e.openCreateMenu=function(){var t=_.chain(e.menus).sortBy("menuDate").last().value(),n=t&&t.menuDate||r.getStringFromDate(new Date),o=i.open({animation:!1,templateUrl:"app/menu/createMenuTpl.html",controller:"createMenuTplController",resolve:{dataToModal:function(){return n}}});o.result.then(function(t){var n=r.getStringFromDate(t);e.create(n)},function(){})},e.create=function(t){var o={menuDate:t};n.create(o).then(function(t){e.refresh()})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.refresh=function(){a()},e.addToMenu=function(e){t.path("/menus/"+e._id+"/add/")}}]),app.controller("navbarController",["$scope","$location","navbarService","$window","Auth","$rootElement",function(e,t,n,o,r,i){function a(){var t=i.attr("ng-app"),r=t+"_buildInfo",a=angular.fromJson(o.sessionStorage.getItem(r));a?e.buildInfo=a:n.getAll().then(function(t){e.buildInfo=t,o.sessionStorage.setItem(r,angular.toJson(t))})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.menu=[{title:"Meniul de astazi",link:"/admin/todayMenu"},{title:"Meniurile viitoare",link:"/admin/nextMenus"},{title:"Contact",link:"/admin/contact"}],e.isCollapsed=!0,e.isLoggedIn=r.isLoggedIn,e.isAdmin=r.isAdmin,e.getCurrentUser=r.getCurrentUser,e.buildInfo={},a(),e.logout=function(){r.logout(),t.path("/admin/login")},e.isActive=function(e){return e===t.path()}}]),app.factory("navbarService",["$http",function(e){var t={},n="/api/buildInfo/";return t.getAll=function(){return e.get(n).then(function(e){return e.data})},t}]),app.controller("nextMenusController",["$scope","$location","menuService","helperService",function(e,t,n,o){function r(){n.getNextMenus().then(function(t){e.menus=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.menus=[],e.errors={},e.friendlyDate=function(e){return o.getStringFromString(e)},r()}]),app.controller("nextMenusItemController",["$scope","$window","$route","menuService",function(e,t,n,o){function r(){i()}function i(){o.getById(n.current.params.menuId).then(function(t){e.menu=t,e.dish=_.find(t.dishes,"_id",n.current.params.dishId)})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.menu={},e.dish={},r()}]),app.config(["$routeProvider",function(e){e.when("/admin/nextMenus",{controller:"nextMenusController",templateUrl:"app/nextMenus/nextMenus.html",title:"Meniurile viitoare"}).when("/admin/nextMenus/:menuId/dishes/:dishId",{controller:"nextMenusItemController",templateUrl:"app/nextMenus/nextMenusItem.html",title:"Detalii produs"})}]),app.controller("todayMenuController",["$scope","menuService","helperService",function(e,t,n){e.todaysMenu={},e.today=n.getFriendlyDate(new Date);var o=function(){var n=e.today.ymd;t.getMenu(n).then(function(t){e.todaysMenu=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})},r=function(){o()};r()}]),app.config(["$routeProvider",function(e){e.when("/admin/todayMenu",{controller:"todayMenuController",templateUrl:"app/todayMenu/todayMenu.html"})}]),app.controller("userController",["$scope","$window","$route","userService","$location",function(e,t,n,o,r){function i(){a()}function a(){o.getById(n.current.params.id).then(function(t){e.user=t})["catch"](function(e){alert(JSON.stringify(e,null,4))})}e.isEditMode=n.current.isEditMode,e.isFocusOnName=e.isEditMode?!1:!0,e.user={},e.isEditMode&&i(),e.create=function(t){e.submitted=!0,t.$valid&&o.create(e.user).then(function(e){r.path("/users")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.update=function(t){e.submitted=!0,t.$valid&&o.update(e.user).then(function(e){r.path("/users")})["catch"](function(e){alert(JSON.stringify(e.data,null,4))})},e.cancel=function(){t.history.back()}}]),app.config(["$routeProvider",function(e){e.when("/admin/users",{controller:"usersController",templateUrl:"app/user/users.html",title:"Utilizatori"}).when("/admin/users/create",{controller:"userController",templateUrl:"app/user/user.html",title:"Adauga utilizator"}).when("/admin/users/:id",{controller:"userController",templateUrl:"app/user/user.html",title:"Editeaza utilizator",isEditMode:!0})}]),app.factory("userService",["$http",function(e){var t={},n="/api/users/";return t.create=function(t){return e.post(n,t)},t.getAll=function(){return e.get(n).then(function(e){return e.data})},t.getById=function(t){return e.get(n+encodeURIComponent(t)).then(function(e){return e.data})},t.update=function(t){return e.put(n,t)},t["delete"]=function(t){return e["delete"](n+encodeURIComponent(t))},t}]),app.controller("usersController",["$scope","$http","Auth","User","modalService",function(e,t,n,o,r){function i(){e.users=o.query()}i(),e["delete"]=function(t){var n={bodyDetails:t.name};r.confirm(n).then(function(n){o.remove({id:t._id}),angular.forEach(e.users,function(n,o){n===t&&e.users.splice(o,1)})})},e.refresh=function(){i()}}]),app.controller("changePasswordController",["$scope","User","Auth","$window",function(e,t,n,o){e.errors={},e.changePassword=function(t){e.submitted=!0,t.$valid&&n.changePassword(e.user.oldPassword,e.user.newPassword).then(function(){e.message="Parola a fost schimbata cu succes."})["catch"](function(){t.password.$setValidity("mongoose",!1),e.errors.other="Parola incorecta",e.message=""})},e.cancel=function(){o.history.back()}}]),app.controller("loginController",["$scope","Auth","$location","$window",function(e,t,n,o){e.user={},e.errors={},e.login=function(o){e.submitted=!0,o.$valid&&t.login({email:e.user.email,password:e.user.password}).then(function(){n.path("/admin/")})["catch"](function(t){e.errors.other=t.message})},e.cancel=function(){o.history.back()}}]),app.controller("resetPasswordController",["$scope","User","Auth","$window",function(e,t,n,o){e.errors={},e.resetPassword=function(t){e.submitted=!0},e.cancel=function(){o.history.back()}}]),app.controller("signupController",["$scope","Auth","$location","$window",function(e,t,n,o){e.user={},e.errors={},e.register=function(o){e.submitted=!0,o.$valid&&t.createUser({name:e.user.name,email:e.user.email,password:e.user.password}).then(function(){n.path("/admin/")})["catch"](function(t){t=t.data,e.errors={},angular.forEach(t.errors,function(t,n){o[n].$setValidity("mongoose",!1),e.errors[n]=t.message})})},e.loginOauth=function(e){o.location.href="/admin/auth/"+e}}]),app.directive("lmCollapse",[function(){return{link:function(e,t,n){function o(){t.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function r(){t.css({height:"0"}),t.removeClass("collapsing").addClass("collapse")}e.$watch(n.lmCollapse,function(e){e?r():o()})}}}]),app.directive("lmFocus",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){"true"===o.lmFocus||""===o.lmFocus?e(function(){n[0].focus()},0):(t.$watch(o.lmFocus,function(t,o){e(function(){t&&n[0].focus()},0)}),n.bind("blur",function(n){e(function(){t.$apply(o.lmFocus+"=false")},0)}),n.bind("focus",function(n){e(function(){t.$apply(o.lmFocus+"=true")},0)}))}}}]),app.directive("match",function(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(e,t,n,o){e.$watch(function(){return o.$pristine&&angular.isUndefined(o.$modelValue)||e.match===o.$modelValue},function(e){o.$setValidity("match",e)})}}}),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["duminică","luni","marți","miercuri","joi","vineri","sâmbătă"],MONTH:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],SHORTDAY:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],SHORTMONTH:["ian.","feb.","mar.","apr.","mai","iun.","iul.","aug.","sept.","oct.","nov.","dec."],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"dd.MM.yyyy HH:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"HH:mm:ss","short":"dd.MM.yyyy HH:mm",shortDate:"dd.MM.yyyy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"RON",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ro-ro",pluralCat:function(e){return 1==e?t.ONE:0==e||1!=e&&e==(0|e)&&e%100>=1&&19>=e%100?t.FEW:t.OTHER}})}]),app.factory("helperService",[function(){var e={};return e.getRoDay=function(e){return 0===e?"Duminica":1===e?"Luni":2===e?"Marti":3===e?"Miercuri":4===e?"Joi":5===e?"Vineri":6===e?"Sambata":void 0},e.getRoMonth=function(e){return 0===e?"Ianuarie":1===e?"Februari":2===e?"Martie":3===e?"Aprilie":4===e?"Mai":5===e?"Iunie":6===e?"Iulie":7===e?"August":8===e?"Septembrie":9===e?"Octombrie":10===e?"Noiembrie":11===e?"Decembrie":void 0},e.getFriendlyDate=function(e){var t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear(),r=t;10>r&&(r="0"+t);var i=n;return 10>i&&(n="0"+n),{dayAsString:this.getRoDay(e.getDay()),dayOfMonth:r,monthAsString:this.getRoMonth(n-1),year:o,ymd:o+"-"+i+"-"+r}},e.getDateFromString=function(e){var t=e.split("-"),n=t[1];return"0"===n[0]&&(n=n.charAt(1)),n-=1,new Date(t[0],n,t[2])},e.getStringFromString=function(e){var t=this.getDateFromString(e),n=this.getFriendlyDate(t),o=n.dayAsString+", "+n.dayOfMonth+" "+n.monthAsString+" "+n.year;return o},e.getStringFromDate=function(e){return this.getFriendlyDate(e).ymd},e.makeId=function(e){for(var t="",n="abcdef0123456789",o=0;e>o;o+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t},e}]),app.service("modalService",["$uibModal",function(e){this.show=function(t,n){var o={},r={};return angular.extend(o,t),angular.extend(r,n),o.controller||(o.controller=["$scope","$uibModalInstance",function(e,t){e.modalOptions=r,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.dismiss("cancel")}}]),e.open(o).result},this.confirm=function(e){var t={animation:!1,templateUrl:"app/common/templates/confirm.html"},n={closeButtonText:"Renunta",actionButtonText:"Sterge",headerText:"Sterge",bodyTitle:"Esti sigur ca vrei sa stergi aceasta inregistrare?",bodyDetails:""};return angular.extend(n,e),this.show(t,n)},this.showImage=function(e){var t={templateUrl:"app/common/templates/showImage.html"};return this.show(t,e)}}]);